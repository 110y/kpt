<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.63.2" />

<META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">



<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/kpt/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/kpt/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/kpt/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/kpt/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/kpt/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/kpt/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/kpt/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/kpt/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/kpt/favicons/android-192x192.png" sizes="192x192">

<title>Kpt</title><meta property="og:title" content="" />
<meta property="og:description" content="live Reconcile configuration files with the live state
  # run the tutorial from the cli kpt tutorial live  tutorial-script
Synopsis Tool to safely apply and delete kubernetes package resources from clusters.
   Command Description     init initialize a package creating a local file   apply apply a package to the cluster   preview preview the operations that apply will perform   destroy remove the package from the cluster    Data Flow: local configuration or stdin -&gt; kpt live -&gt; apiserver (Kubernetes cluster)" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://pwittrock.github.io/kpt/reference/live/readme/" />
<meta property="og:site_name" content="Kpt" />
<meta itemprop="name" content="">
<meta itemprop="description" content="live Reconcile configuration files with the live state
  # run the tutorial from the cli kpt tutorial live  tutorial-script
Synopsis Tool to safely apply and delete kubernetes package resources from clusters.
   Command Description     init initialize a package creating a local file   apply apply a package to the cluster   preview preview the operations that apply will perform   destroy remove the package from the cluster    Data Flow: local configuration or stdin -&gt; kpt live -&gt; apiserver (Kubernetes cluster)">

<meta itemprop="wordCount" content="442">



<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content=""/>
<meta name="twitter:description" content="live Reconcile configuration files with the live state
  # run the tutorial from the cli kpt tutorial live  tutorial-script
Synopsis Tool to safely apply and delete kubernetes package resources from clusters.
   Command Description     init initialize a package creating a local file   apply apply a package to the cluster   preview preview the operations that apply will perform   destroy remove the package from the cluster    Data Flow: local configuration or stdin -&gt; kpt live -&gt; apiserver (Kubernetes cluster)"/>





<link rel="preload" href="/kpt/scss/main.min.6ca91c1f1fce086842eb1bd80b503b1a623183950b73374882023fde9fdab4ac.css" as="style">
<link href="/kpt/scss/main.min.6ca91c1f1fce086842eb1bd80b503b1a623183950b73374882023fde9fdab4ac.css" rel="stylesheet" integrity="">


<script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>

<link rel="stylesheet" type="text/css" href="/css/asciinema-player.css" />

  </head>
  <body class="td-page">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
        <a class="navbar-brand" href="/kpt/">
		<span class="navbar-logo"></span><span class="text-uppercase font-weight-bold">Kpt</span>
	</a>
	<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
		<ul class="navbar-nav mt-2 mt-lg-0">
			
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="/kpt/installation/" ><span>Installation</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="/kpt/guides/" ><span>Guides</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link active" href="/kpt/reference/" ><span class="active">Command Reference</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="/kpt/faq/" ><span>FAQ</span></a>
			</li>
			
			
			
		</ul>
	</div>
	<div class="navbar-nav d-none d-lg-block">
</div>
</nav>

    </header>
    <div class="container-fluid td-default td-outer">
      <main role="main" class="td-main">
        

<h2 id="live">live</h2>
<p>Reconcile configuration files with the live state</p>
<link rel="stylesheet" type="text/css" href="/kpt/gifs/asciinema-player.css" />
<asciinema-player src="coming..." speed="1" theme="solarized-dark" cols="60" rows="26" font-size="medium" idle-time-limit="1"></asciinema-player>
<script src="/kpt/gifs/asciinema-player.js"></script>
<pre><code># run the tutorial from the cli
kpt tutorial live
</code></pre>
<p><a href="../gifs/live.sh">tutorial-script</a></p>
<h3 id="synopsis">Synopsis</h3>
<p>Tool to safely apply and delete kubernetes package resources from clusters.</p>
<table>
<thead>
<tr>
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="init.md">init</a></td>
<td>initialize a package creating a local file</td>
</tr>
<tr>
<td><a href="apply.md">apply</a></td>
<td>apply a package to the cluster</td>
</tr>
<tr>
<td><a href="preview.md">preview</a></td>
<td>preview the operations that apply will perform</td>
</tr>
<tr>
<td><a href="destroy.md">destroy</a></td>
<td>remove the package from the cluster</td>
</tr>
</tbody>
</table>
<p><strong>Data Flow</strong>: local configuration or stdin -&gt; kpt live -&gt; apiserver (Kubernetes cluster)</p>
<table>
<thead>
<tr>
<th>Configuration Read From</th>
<th>Configuration Written To</th>
</tr>
</thead>
<tbody>
<tr>
<td>local files</td>
<td>apiserver</td>
</tr>
<tr>
<td>apiserver</td>
<td>stdout</td>
</tr>
</tbody>
</table>
<h4 id="pruning">Pruning</h4>
<p>kpt live apply will automatically delete resources which have been
previously applied, but which are no longer included. This clean-up
functionality is called pruning. For example, consider a package
which has been applied with the following three resources:</p>
<pre><code>service-1 (Service)
deployment-1 (Deployment)
config-map-1 (ConfigMap)
</code></pre><p>Then imagine the package is updated to contain the following resources,
including a new ConfigMap named <code>config-map-2</code> (Notice that <code>config-map-1</code>
is not part of the updated package):</p>
<pre><code>service-1 (Service)
deployment-1 (Deployment)
config-map-2 (ConfigMap)
</code></pre><p>When the updated package is applied, <code>config-map-1</code> is automatically
deleted (pruned) since it is omitted.</p>
<p>In order to take advantage of this automatic clean-up, a package must contain
a <strong>grouping object template</strong>, which is a ConfigMap with a special label. An example is:</p>
<pre><code>apiVersion: v1
kind: ConfigMap
metadata:
  name: test-grouping-object
  labels:
    cli-utils.sigs.k8s.io/inventory-id: test-group
</code></pre><p>And the special label is:</p>
<pre><code>cli-utils.sigs.k8s.io/inventory-id: *group-name*
</code></pre><p><code>kpt live apply</code> recognizes this template from the special label, and based
on this kpt will create new grouping object with the metadata of all applied
objects in the ConfigMap&rsquo;s data field. Subsequent <code>kpt live apply</code> commands can
then query the grouping object, and calculate the omitted objects, cleaning up
accordingly. When a grouping object is created in the cluster, a hash suffix
is added to the name. Example:</p>
<pre><code>test-grouping-object-17b4dba8
</code></pre><h4 id="status">Status</h4>
<p>kpt live apply also has support for computing status for resources. This is
useful during apply for making sure that not only are the set of resources applied
into the cluster, but also that the desired state expressed in the resource are
fully reconciled in the cluster. An example of this could be applying a deployment. Without
looking at the status, the operation would be reported as successful as soon as the
deployment resource has been created in the apiserver. With status, kpt live apply will
wait until the desired number of pods have been created and become available.</p>
<p>Status is computed through a set of rules for specific types, and
functionality for polling a set of resources and computing the aggregate status
for the set. For CRDs, there is a set of recommendations that if followed, will allow
kpt live apply to correctly compute status.</p>
<h3 id="heading"></h3>



      </main>
      
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="User mailing list" aria-label="User mailing list">
    <a class="text-white" target="_blank" href="https://groups.google.com/forum/#!forum/kpt-users">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-white" target="_blank" href="https://github.com/GoogleContainerTools/kpt">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2020 Google LLC All Rights Reserved</small>
        <small class="ml-1"><a href="https://policies.google.com/privacy" target="_blank">Privacy Policy</a></small>
	
		
	
      </div>
    </div>
  </div>
</footer>


    </div>
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>







<script src="/kpt/js/main.min.b598b52f18af835bd9f331906f352c2f34aedad03efef057573f1bb8d4d0117c.js" integrity="sha256-tZi1Lxivg1vZ8zGQbzUsLzSu2tA&#43;/vBXVz8buNTQEXw=" crossorigin="anonymous"></script>

<script src="/js/asciinema-player.js"></script>


  </body>
</html>